--[[
    ğŸ“‚ Script: Inventory UI Generator
    ğŸ® å ´æ‰€: StarterPlayer > StarterPlayerScriptsï¼ˆLocalScriptï¼‰
    ğŸ“‹ æ¦‚è¦: ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªUIå†…ã®ã‚¢ã‚¤ãƒ†ãƒ ãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆã—ã€ã‚¯ãƒªãƒƒã‚¯ã§ä½¿ç”¨å‡¦ç†ã‚’ã‚µãƒ¼ãƒãƒ¼ã¸é€ä¿¡
--]]

-- ã‚µãƒ¼ãƒ“ã‚¹å–å¾—
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ã¨GUIã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local inventoryUI = playerGui:WaitForChild("InventoryUI")
local scrollingFrame = inventoryUI:WaitForChild("Frame"):WaitForChild("ScrollingFrame")

-- ã‚¢ã‚¤ãƒ†ãƒ æƒ…å ±ã‚’æ ¼ç´ã—ãŸModuleScriptã‚’å–å¾—
local ItemData = require(ReplicatedStorage:WaitForChild("ItemDataModule"))

-- ã‚µãƒ¼ãƒãƒ¼ã¸ã€Œã‚¢ã‚¤ãƒ†ãƒ ä½¿ã£ãŸã‚ˆï¼ã€ã¨ä¼ãˆã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ
local UseItemEvent = ReplicatedStorage:WaitForChild("UseItemEvent")

-- ğŸ§ª ä»®ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªï¼ˆã‚ã¨ã§ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã•ã‚Œã‚‹ã‚ˆã†ã«å¤‰æ›´äºˆå®šï¼‰
local Inventory = {
	["HealthPotion"] = 2,
	["SpeedBoots"] = 1,
}

-- ğŸ“› æ—¢å­˜ã®ãƒœã‚¿ãƒ³ã‚’ã™ã¹ã¦å‰Šé™¤ï¼ˆUIæ›´æ–°æ™‚ã«ãƒªã‚»ãƒƒãƒˆã™ã‚‹ãŸã‚ï¼‰
for _, child in pairs(scrollingFrame:GetChildren()) do
	if child:IsA("TextButton") then
		child:Destroy()
	end
end

-- ğŸ” ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªå†…ã®ã‚¢ã‚¤ãƒ†ãƒ åˆ†ã€ãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
for itemName, count in pairs(Inventory) do
	local data = ItemData[itemName]

	if data then
		-- ğŸ¨ ãƒœã‚¿ãƒ³ç”Ÿæˆã¨ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š
		local button = Instance.new("TextButton")
		button.Size = UDim2.new(1, 0, 0, 40)
		button.BackgroundColor3 = Color3.fromRGB(60, 140, 180)
		button.TextColor3 = Color3.fromRGB(255, 255, 255)
		button.Text = data.Name .. " x" .. count
		button.Font = Enum.Font.GothamBold
		button.TextSize = 18
		button.Parent = scrollingFrame

		-- ğŸ–±ï¸ ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ä½¿ç”¨ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
		button.MouseButton1Click:Connect(function()
			print("ä½¿ã†: " .. itemName)
			UseItemEvent:FireServer(itemName)
		end)
	end
end
